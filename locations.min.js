var Locations={data:[],messages:[],errorclass:"ui-error",request:function(c,d,e){try{if(typeof c=="string"){this.data.uri=c}if(typeof d=="object"){this.data.query=d}if(typeof e=="string"){this.data.method=e}var b=$("[data-response="+this.data.query["request"]+"]");$.ajax({url:this.data.uri,data:this.data.query,method:this.data.method,dataType:"json",beforeSend:function(){$("."+Locations.errorclass).remove();if("loading" in $.mobile){$.mobile.loading("show")}},success:function(f,g){if(g=="success"){return Locations.callback(b,f)}else{Locations.messages.push("Error while success response")}},error:function(f,h,g){Locations.messages.push(g)},complete:function(){if(b.length){if("selectmenu" in b){b.selectmenu("refresh")}else{Locations.messages.push("Cannot update select list")}}if(Locations.messages.length>0){var f="";for(i=0;i<Locations.messages.length;i++){f+="<li>"+Locations.messages[i]+"</li>"}b.before('<ul class="'+Locations.errorclass+'">'+f+"</ul>");f=""}if("loading" in $.mobile){$.mobile.loading("hide")}},statusCode:{401:function(){Locations.messages.push("Authorization required")},403:function(){Locations.messages.push("Access denied")},404:function(){Locations.messages.push("Page not found")}}})}catch(a){this.messages.push(a.message)}},callback:function(b,d){try{if(!this.messages.length){var c="";d.forEach(function(e){var f=e.id?e.id:e.city_id;c+='<option value="'+f+'">'+e.name+"</option>"});b.empty().html(c)}}catch(a){this.messages.push(a.message)}return this},};